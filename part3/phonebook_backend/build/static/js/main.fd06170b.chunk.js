(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(15),o=n.n(r),s=(n(20),n(6)),i=n(3),u=n(0);var d=function(e){var t=e.searchName,n=e.handleSearchChange;return Object(u.jsxs)("div",{children:["Filter Names: ",Object(u.jsx)("input",{value:t,onChange:n})]})};var l=function(e){var t=e.addPerson,n=e.newName,c=e.handleNameChange,a=e.newNumber,r=e.handleNumberChange;return Object(u.jsx)("form",{onSubmit:t,children:Object(u.jsxs)("div",{className:"form-inputs",children:[Object(u.jsxs)("div",{className:"form-field-group",children:[Object(u.jsx)("label",{children:"Name"}),Object(u.jsx)("input",{required:!0,value:n,onChange:c})]}),Object(u.jsxs)("div",{className:"form-field-group",children:[Object(u.jsx)("label",{children:"Number"}),Object(u.jsx)("input",{required:!0,value:a,onChange:r})]}),Object(u.jsx)("button",{className:"add-btn",type:"submit",children:"Add"})]})})};var j=function(e){var t=e.persons,n=e.searchName,c=e.deletePerson;return Object(u.jsx)(u.Fragment,{children:t.length>0&&Object(u.jsx)("table",{className:"persons-table",children:Object(u.jsx)("tbody",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"name",children:e.name}),Object(u.jsx)("td",{className:"number",children:e.number}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return c(e.id)},className:"delete-btn",children:"Delete"})})]},t)}))})})})};var b=function(e){var t=e.message;return null===t.type?null:Object(u.jsx)("div",{className:"notification ".concat(t.type),children:Object(u.jsx)("p",{children:t.text})})},h=n(4),m=n.n(h),f="/api/persons",p={getAll:function(){return m.a.get(f)},create:function(e){return m.a.post(f,e)},update:function(e,t){return m.a.put("".concat(f,"/").concat(e),t)},remove:function(e){return m.a.delete("".concat(f,"/").concat(e))}};n(40);var O=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1];Object(c.useEffect)((function(){p.getAll().then((function(e){return a(e.data)}))}),[]);var r=Object(c.useState)(""),o=Object(i.a)(r,2),h=o[0],m=o[1],f=Object(c.useState)(""),O=Object(i.a)(f,2),x=O[0],v=O[1],N=Object(c.useState)(""),g=Object(i.a)(N,2),y=g[0],w=g[1],C=Object(c.useState)({text:null,type:null}),k=Object(i.a)(C,2),S=k[0],A=k[1],P=function(e){var t=Object(s.a)(Object(s.a)({},e),{},{number:x});p.update(e.id,t).then((function(t){a(n.map((function(n){return n.id!==e.id?n:t.data}))),D({text:"You have updated ".concat(h,"'s details in your phonebook."),type:"success"})})).catch((function(e){D({text:"Information of ".concat(h," has already been removed from the server."),type:"error"})}))},D=function(e){var t=e.text,n=e.type;A({text:t,type:n}),setTimeout((function(){A({text:null,type:null})}),3e3)};return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{searchName:y,handleSearchChange:function(e){w(e.target.value)}}),Object(u.jsxs)("div",{children:[Object(u.jsx)(b,{message:S}),Object(u.jsx)("h3",{children:"Add new"}),Object(u.jsx)(l,{addPerson:function(e){if(e.preventDefault(),n.map((function(e){return e.name})).includes(h)){if(window.confirm("".concat(h," is already added to the phonebook. Replace the old number with the new one?"))){var t=n.filter((function(e){return e.name===h}))[0];P(t)}}else{var c={name:h,number:x};p.create(c).then((function(e){a(n.concat(e.data)),D({text:"You have added ".concat(h," to your phonebook."),type:"success"})})).catch((function(e){D({text:e.response.data.error,type:"error"})}))}m(""),v("")},newName:h,handleNameChange:function(e){m(e.target.value)},newNumber:x,handleNumberChange:function(e){v(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(j,{deletePerson:function(e){var t=n.filter((function(t){return t.id===e}))[0].name;window.confirm("Delete ".concat(t," from phonebook?"))&&p.remove(e).then((function(t){204===t.status&&a(n.filter((function(t){return t.id!==e})))}))},persons:n,searchName:y})]})]})};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.fd06170b.chunk.js.map